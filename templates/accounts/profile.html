{% extends 'base.html' %}

{% block content %}
<div class="profile-header">
    <div class="profile-image">
        {% if user.profile_image %}
        <img src="{{ user.profile_image.url }}" alt="{{ user.username }}">
        {% else %}
        <div class="avatar-placeholder">{{ user.username.0|upper }}</div>
        {% endif %}
    </div>
    <h1>{{ user.first_name }} {{ user.last_name|default:user.username }}</h1>
    <p class="username">@{{ user.username }}</p>
    {% if user.bio %}
    <p class="bio">{{ user.bio }}</p>
    {% endif %}

    <div class="profile-stats">
        <span><strong>{{ user.followers.count|default:"0" }}</strong> followers</span>
        <span><strong>{{ user.following.count|default:"0" }}</strong> following</span>
    </div>

    <div class="profile-actions">
        <a href="#" class="btn-secondary">Share</a>
        <a href="#" class="btn-secondary">Edit Profile</a>
        <a href="{% url 'boards:board_create' %}" class="btn-secondary">Create Board</a>
    </div>
</div>

<div class="profile-tabs">
    <button class="tab active">Created</button>
    <button class="tab">Saved</button>
</div>

<div class="content-section">
    <h3>Your Pins</h3>
    <div class="masonry-grid">
        {% for pin in user.pins.all %}
        <div class="pin-card">
            <a href="{% url 'pins:pin_detail' pin.id %}">
                <img src="{{ pin.image.url }}" alt="{{ pin.title }}">
            </a>
        </div>
        {% empty %}
        <p>You haven't created any pins yet.</p>
        {% endfor %}
    </div>
</div>

<div class="content-section">
    <h3>Your Boards</h3>
    <div class="boards-grid">
        {% for board in user.boards.all %}
        <div class="board-card">
            <a href="{% url 'boards:board_detail' board.id %}">
                <div class="board-preview">
                    <!-- Show preview of first 3 pins -->
                </div>
                <h3>{{ board.name }}</h3>
                <p>{{ board.pins.count }} pins</p>
            </a>
        </div>
        {% empty %}
        <p>No boards created.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}